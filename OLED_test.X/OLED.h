//this header file is based on SSD1106 chip for 128*64 OLED
#include <stdint.h>
#define OLED_ADDR		0x3C

#define LEFT	0
#define RIGHT	9999
#define CENTER	9998

#define OLED_COMMAND		0x80
#define OLED_DATA			0xC0
#define OLED_DATA_CONTINUE	0x40

#define RST_NOT_IN_USE	255

// OLED Commandset
// ------------------
// Fundamental Commands
#define OLED_SET_CONTRAST_CONTROL					0x81
#define OLED_DISPLAY_ALL_ON_RESUME					0xA4
#define OLED_DISPLAY_ALL_ON							0xA5
#define OLED_NORMAL_DISPLAY							0xA6
#define OLED_INVERT_DISPLAY							0xA7
#define OLED_DISPLAY_OFF							0xAE
#define OLED_DISPLAY_ON								0xAF
#define OLED_NOP									0xE3
// Scrolling Commands
#define OLED_HORIZONTAL_SCROLL_RIGHT				0x26
#define OLED_HORIZONTAL_SCROLL_LEFT					0x27
#define OLED_HORIZONTAL_SCROLL_VERTICAL_AND_RIGHT	0x29
#define OLED_HORIZONTAL_SCROLL_VERTICAL_AND_LEFT	0x2A
#define OLED_DEACTIVATE_SCROLL						0x2E
#define OLED_ACTIVATE_SCROLL						0x2F
#define OLED_SET_VERTICAL_SCROLL_AREA				0xA3
// Addressing Setting Commands
#define OLED_SET_LOWER_COLUMN						0x00
#define OLED_SET_HIGHER_COLUMN						0x10
#define OLED_MEMORY_ADDR_MODE						0x20
#define OLED_SET_COLUMN_ADDR						0x21
#define OLED_SET_PAGE_ADDR							0xB0
// Hardware Configuration Commands
#define OLED_SET_START_LINE							0x40
#define OLED_SET_SEGMENT_REMAP						0xA0
#define OLED_SET_MULTIPLEX_RATIO					0xA8
#define OLED_COM_SCAN_DIR_INC						0xC0
#define OLED_COM_SCAN_DIR_DEC						0xC8
#define OLED_SET_DISPLAY_OFFSET						0xD3
#define OLED_SET_COM_PINS							0xDA
#define OLED_CHARGE_PUMP							0x8D
// Timing & Driving Scheme Setting Commands
#define OLED_SET_DISPLAY_CLOCK_DIV_RATIO			0xD5
#define OLED_SET_PRECHARGE_PERIOD					0xD9
#define OLED_SET_VCOM_DESELECT						0xDB

uint8_t	scrbuf[1024];

typedef struct
{
	uint8_t* font;
	uint8_t x_size;
	uint8_t y_size;
	uint8_t offset;
	uint8_t numchars;
	uint8_t inverted;
}  _current_font;

void setFont(uint8_t* font);
void transmitDATA(uint8_t *data,uint8_t datalen);
void transmitByte(uint8_t data);
void transmitCommand(uint8_t command);
void print2Screen(uint8_t row , uint8_t column,char *data );
void updateData();
void clearScreen();
void transmitCommand(uint8_t command);
void init_OLED(void);
void clearRow(uint8_t row);
void powerDown();
void powerUP();

uint8_t characterFont[] =
{
0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   // sp
0x00, 0x00, 0x00, 0x2f, 0x00, 0x00,   // !
0x00, 0x00, 0x07, 0x00, 0x07, 0x00,   // "
0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14,   // #
0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12,   // $
0x00, 0x23, 0x13, 0x08, 0x64, 0x62,   // %
0x00, 0x36, 0x49, 0x55, 0x22, 0x50,   // &
0x00, 0x00, 0x05, 0x03, 0x00, 0x00,   // '
0x00, 0x00, 0x1c, 0x22, 0x41, 0x00,   // (
0x00, 0x00, 0x41, 0x22, 0x1c, 0x00,   // )
0x00, 0x14, 0x08, 0x3E, 0x08, 0x14,   // *
0x00, 0x08, 0x08, 0x3E, 0x08, 0x08,   // +
0x00, 0x00, 0x00, 0xA0, 0x60, 0x00,   // ,
0x00, 0x08, 0x08, 0x08, 0x08, 0x08,   // -
0x00, 0x00, 0x60, 0x60, 0x00, 0x00,   // .
0x00, 0x20, 0x10, 0x08, 0x04, 0x02,   // /

0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E,   // 0
0x00, 0x00, 0x42, 0x7F, 0x40, 0x00,   // 1
0x00, 0x42, 0x61, 0x51, 0x49, 0x46,   // 2
0x00, 0x21, 0x41, 0x45, 0x4B, 0x31,   // 3
0x00, 0x18, 0x14, 0x12, 0x7F, 0x10,   // 4
0x00, 0x27, 0x45, 0x45, 0x45, 0x39,   // 5
0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30,   // 6
0x00, 0x01, 0x71, 0x09, 0x05, 0x03,   // 7
0x00, 0x36, 0x49, 0x49, 0x49, 0x36,   // 8
0x00, 0x06, 0x49, 0x49, 0x29, 0x1E,   // 9
0x00, 0x00, 0x36, 0x36, 0x00, 0x00,   // :
0x00, 0x00, 0x56, 0x36, 0x00, 0x00,   // ;
0x00, 0x08, 0x14, 0x22, 0x41, 0x00,   // <
0x00, 0x14, 0x14, 0x14, 0x14, 0x14,   // =
0x00, 0x00, 0x41, 0x22, 0x14, 0x08,   // >
0x00, 0x02, 0x01, 0x51, 0x09, 0x06,   // ?

0x00, 0x32, 0x49, 0x59, 0x51, 0x3E,   // @
0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C,   // A
0x00, 0x7F, 0x49, 0x49, 0x49, 0x36,   // B
0x00, 0x3E, 0x41, 0x41, 0x41, 0x22,   // C
0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C,   // D
0x00, 0x7F, 0x49, 0x49, 0x49, 0x41,   // E
0x00, 0x7F, 0x09, 0x09, 0x09, 0x01,   // F
0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A,   // G
0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F,   // H
0x00, 0x00, 0x41, 0x7F, 0x41, 0x00,   // I
0x00, 0x20, 0x40, 0x41, 0x3F, 0x01,   // J
0x00, 0x7F, 0x08, 0x14, 0x22, 0x41,   // K
0x00, 0x7F, 0x40, 0x40, 0x40, 0x40,   // L
0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F,   // M
0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F,   // N
0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E,   // O

0x00, 0x7F, 0x09, 0x09, 0x09, 0x06,   // P
0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E,   // Q
0x00, 0x7F, 0x09, 0x19, 0x29, 0x46,   // R
0x00, 0x46, 0x49, 0x49, 0x49, 0x31,   // S
0x00, 0x01, 0x01, 0x7F, 0x01, 0x01,   // T
0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F,   // U
0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F,   // V
0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F,   // W
0x00, 0x63, 0x14, 0x08, 0x14, 0x63,   // X
0x00, 0x07, 0x08, 0x70, 0x08, 0x07,   // Y
0x00, 0x61, 0x51, 0x49, 0x45, 0x43,   // Z
0x00, 0x00, 0x7F, 0x41, 0x41, 0x00,   // [
0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55,   // Backslash (Checker pattern)
0x00, 0x00, 0x41, 0x41, 0x7F, 0x00,   // ]
0x00, 0x04, 0x02, 0x01, 0x02, 0x04,   // ^
0x00, 0x40, 0x40, 0x40, 0x40, 0x40,   // _

0x00, 0x00, 0x03, 0x05, 0x00, 0x00,   // `
0x00, 0x20, 0x54, 0x54, 0x54, 0x78,   // a
0x00, 0x7F, 0x48, 0x44, 0x44, 0x38,   // b
0x00, 0x38, 0x44, 0x44, 0x44, 0x20,   // c
0x00, 0x38, 0x44, 0x44, 0x48, 0x7F,   // d
0x00, 0x38, 0x54, 0x54, 0x54, 0x18,   // e
0x00, 0x08, 0x7E, 0x09, 0x01, 0x02,   // f
0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C,   // g
0x00, 0x7F, 0x08, 0x04, 0x04, 0x78,   // h
0x00, 0x00, 0x44, 0x7D, 0x40, 0x00,   // i
0x00, 0x40, 0x80, 0x84, 0x7D, 0x00,   // j
0x00, 0x7F, 0x10, 0x28, 0x44, 0x00,   // k
0x00, 0x00, 0x41, 0x7F, 0x40, 0x00,   // l
0x00, 0x7C, 0x04, 0x18, 0x04, 0x78,   // m
0x00, 0x7C, 0x08, 0x04, 0x04, 0x78,   // n
0x00, 0x38, 0x44, 0x44, 0x44, 0x38,   // o

0x00, 0xFC, 0x24, 0x24, 0x24, 0x18,   // p
0x00, 0x18, 0x24, 0x24, 0x18, 0xFC,   // q
0x00, 0x7C, 0x08, 0x04, 0x04, 0x08,   // r
0x00, 0x48, 0x54, 0x54, 0x54, 0x20,   // s
0x00, 0x04, 0x3F, 0x44, 0x40, 0x20,   // t
0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C,   // u
0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C,   // v
0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C,   // w
0x00, 0x44, 0x28, 0x10, 0x28, 0x44,   // x
0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C,   // y
0x00, 0x44, 0x64, 0x54, 0x4C, 0x44,   // z
0x00, 0x00, 0x10, 0x7C, 0x82, 0x00,   // {
0x00, 0x00, 0x00, 0xFF, 0x00, 0x00,   // |
0x00, 0x00, 0x82, 0x7C, 0x10, 0x00,   // }
0x00, 0x00, 0x06, 0x09, 0x09, 0x06    // ~ (Degrees)
};


/*typedef enum {
	
	
}characters;*/
/*void clrscreen(void)
{
    memset(scrbuf,0,1024);
}
/*
void updateData()
{
    memcpy(scrbuf,"HELLO WORLD!",13);
    transmitCommand(OLED_SET_COLUMN_ADDR);
	transmitCommand(0x00);
	transmitCommand(127);

	transmitCommand(OLED_SET_PAGE_ADDR);
	transmitCommand(0x00);
	transmitCommand(0xFF);
   transmitDATA(scrbuf);
   //  i2c1_write1ByteRegister(OLED_ADDR,OLED_DATA,'K');
}
*/